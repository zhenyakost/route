{"version":3,"sources":["images/pizza.png","images/burger.png","images/coca.png","images/salad.png","images/water.png","images/icecream.png","images/kebab.png","db/db.js","Components/Button/Button.jsx","Components/Card/Card.jsx","App.js","index.js"],"names":["getData","title","price","Image","pizzaImg","id","burgerImg","cocaImg","kebabImg","saladImg","waterImg","iceCreamImg","Button","type","disable","onClick","className","disabled","Card","food","onAdd","onRemove","useState","count","setCount","src","alt","foods","require","tele","window","Telegram","WebApp","App","cartItems","setCartItems","totalPrice","setTotalPrice","initDataUnsafe","initData","useEffect","ready","MainButton","fetch","body","new_order","JSON","strinigify","user_id","user","goods","map","a","quant","quantity","amount","then","res","text","stringify","catch","err","reduce","c","exist","find","x","button_color","show","filter","length","hide","toFixed","ReactDOM","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.96d0fef0.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/pizza.c644001e.png\";","export default __webpack_public_path__ + \"static/media/burger.cb91a412.png\";","export default __webpack_public_path__ + \"static/media/coca.57521b94.png\";","export default __webpack_public_path__ + \"static/media/salad.c5129a87.png\";","export default __webpack_public_path__ + \"static/media/water.52ba975d.png\";","export default __webpack_public_path__ + \"static/media/icecream.596499d5.png\";","export default __webpack_public_path__ + \"static/media/kebab.3c4858e8.png\";","import pizzaImg from \"../images/pizza.png\";\nimport burgerImg from \"../images/burger.png\";\nimport cocaImg from \"../images/coca.png\";\nimport saladImg from \"../images/salad.png\";\nimport waterImg from \"../images/water.png\";\nimport iceCreamImg from \"../images/icecream.png\";\nimport kebabImg from \"../images/kebab.png\";\n\nexport function getData() {\n  return [\n    { title: \"Pizza\", price: 17.99, Image: pizzaImg,id:1 },\n    { title: \"Burger\", price: 15, Image: burgerImg,id:2 },\n    { title: \"Coca\", price: 3.5, Image: cocaImg ,id:3},\n    { title: \"Kebab\", price: 13.99, Image: kebabImg,id:4 },\n    { title: \"Salad\", price: 2.5, Image: saladImg,id:5 },\n    { title: \"Bottle of water\", price: 0.99, Image: waterImg,id:6 },\n    { title: \"Ice cream\", price: 2.99, Image: iceCreamImg,id:7 },\n  ];\n}\n","import React from \"react\";\nimport \"./Button.css\";\n\nfunction Button({ type, title, disable, onClick }) {\n  return (\n    <div\n      className={`btn ${\n        (type === \"add\" && \"add\") ||\n        (type === \"remove\" && \"remove\")\n      }`}\n      disabled={disable}\n      onClick={onClick}\n    >\n      {title}\n    </div>\n  );\n}\n\nexport default Button;","import React, { useState } from \"react\";\nimport \"./Card.css\";\nimport Button from \"../Button/Button\";\nfunction Card({ food, onAdd, onRemove }) {\n  const [count, setCount] = useState(0);\n  const { title, Image, price, id } = food;\n\n  const handleIncrement = () => {\n    setCount(count + 1);\n    onAdd(food);\n  };\n  const handleDecrement = () => {\n    setCount(count - 1);\n    onRemove(food);\n  };\n\n  return (\n    <div className=\"card\">\n      <span\n        className={`${count !== 0 ? \"card__badge\" : \"card__badge--hidden\"}`}\n      >\n        {count}\n      </span>\n      <div className=\"image__container\">\n        <img src={Image} alt={title} />\n      </div>\n      <h4 className=\"card__title\">\n        {title} . <span className=\"card__price\">{price} ₴</span>\n      </h4>\n\n      <div className=\"btn-container\">\n        <Button title={count !== 0 ? \"+\" : 'ADD'} type={count !== 0 ? \"add\" : 'new'} onClick={handleIncrement} />\n        {count !== 0 ? (\n          <Button title={\"-\"} type={\"remove\"} onClick={handleDecrement} />\n        ) : (\n          \"\"\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Card from \"./Components/Card/Card\";\n// import { con } from './db/db_connection';\nconst { getData } = require(\"./db/db\");\nconst foods = getData();\nconst tele = window.Telegram.WebApp;\nconst token = \"5468424043:AAFV7yfRA7EpyZ9VOTA75LRfnYcWVV-oUZw\";\nconst axios = require('axios');\n\nfunction App() {\n  const [cartItems, setCartItems] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [initData, setInitData] = useState(tele.initDataUnsafe);\n\n  const getPrices = () => {\n    const res = [];\n    cartItems.forEach((a, i) => {\n      res.push({label: `${a.title} x${a.quantity}`, amount: a.price * a.quantity * 100})\n    });\n    return res;\n  }\n\n  useEffect(() => {\n    tele.ready();\n    tele.MainButton.onClick(() => {\n      fetch('db.php', {body:{new_order:JSON.strinigify({\n        user_id: initData.user.id,\n        //name: initData.user.first_name,\n        goods:JSON.strinigify(cartItems.map(a => a.title)),\n        quant: JSON.strinigify(cartItems.map(a => a.quantity)),\n        amount: totalPrice\n      })}})\n      // .then(res => {\n      //   fetch(`https://api.telegram.org/bot${token}/sendInvoice`, {method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.strinigify({\n      //     chat_id: initData.user.id,\n      //     title: `Замовлення №${res}`,\n      //     description: 'Сплатіть за ваше замовлення тут',\n      //     payload: {\n      //       unique_id: `000${res}${Date.now()}`,\n      //       provider_token: \"632593626:TEST:sandbox_i40694328466\"\n      //     },\n      //     provider_token: \"632593626:TEST:sandbox_i40694328466\",\n      //     currency: \"UAH\",\n      //     prices: getPrices()\n      //   })})\n      // })\n      // .then(res => {\n      //   tele.MainButton.text = res;\n      // })\n      .then(res => tele.MainButton.text = JSON.stringify(res))\n      .catch(err => tele.MainButton.text = err)\n    })\n  });\n\n  useEffect(() => {\n    setTotalPrice(cartItems.reduce((a, c) => a + c.price * c.quantity, 0));\n  }, [cartItems])\n\n  const onAdd = (food) => {\n    const exist = cartItems.find((x) => x.id === food.id);\n    if (exist) {\n      setCartItems(\n        cartItems.map((x) =>\n          x.id === food.id ? { ...exist, quantity: exist.quantity + 1 } : x\n        )\n      );\n    } else {\n      setCartItems([...cartItems, { ...food, quantity: 1 }]);\n    }\n    tele.MainButton.text = \"Оплатити\";\n    tele.MainButton.button_color = \"#00B900\";\n    tele.MainButton.show();\n  };\n\n  const onRemove = (food) => {\n    const exist = cartItems.find((x) => x.id === food.id);\n    if (exist.quantity === 1) {\n      setCartItems(cartItems.filter((x) => x.id !== food.id));\n    } else {\n      setCartItems(\n        cartItems.map((x) =>\n          x.id === food.id ? { ...exist, quantity: exist.quantity - 1 } : x\n        )\n      );\n    }\n    if(cartItems.length === 1){\n      tele.MainButton.hide();\n    }\n  };\n\n  return (\n    <>\n      <div className=\"cart__container\">\n        <span className=\"\">Total Price: {totalPrice.toFixed(2)}₴</span>\n      </div>\n      <div className=\"cards__container\">\n        {foods.map((food) => {\n          return (\n            <Card food={food} key={food.id} onAdd={onAdd} onRemove={onRemove} />\n          );\n        })}\n      </div>\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(\n    <App />\n);\n"],"sourceRoot":""}