{"version":3,"sources":["images/pizza.png","images/burger.png","images/coca.png","images/salad.png","images/water.png","images/icecream.png","images/kebab.png","db/db.js","Components/Button/Button.jsx","Components/Card/Card.jsx","App.js","index.js"],"names":["getData","title","price","Image","pizzaImg","id","burgerImg","cocaImg","kebabImg","saladImg","waterImg","iceCreamImg","Button","type","disable","onClick","className","disabled","Card","food","onAdd","onRemove","useState","count","setCount","src","alt","axios","require","foods","tele","window","Telegram","WebApp","App","cartItems","setCartItems","totalPrice","setTotalPrice","initDataUnsafe","initData","useEffect","ready","onEvent","post","JSON","strinigify","chat_id","user","description","payload","unique_id","Date","now","provider_token","currency","prices","label","amount","headers","then","res","console","log","close","catch","err","reduce","a","c","quantity","exist","find","x","map","MainButton","text","button_color","show","filter","length","hide","toFixed","ReactDOM","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.66b33081.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/pizza.c644001e.png\";","export default __webpack_public_path__ + \"static/media/burger.cb91a412.png\";","export default __webpack_public_path__ + \"static/media/coca.57521b94.png\";","export default __webpack_public_path__ + \"static/media/salad.c5129a87.png\";","export default __webpack_public_path__ + \"static/media/water.52ba975d.png\";","export default __webpack_public_path__ + \"static/media/icecream.596499d5.png\";","export default __webpack_public_path__ + \"static/media/kebab.3c4858e8.png\";","import pizzaImg from \"../images/pizza.png\";\nimport burgerImg from \"../images/burger.png\";\nimport cocaImg from \"../images/coca.png\";\nimport saladImg from \"../images/salad.png\";\nimport waterImg from \"../images/water.png\";\nimport iceCreamImg from \"../images/icecream.png\";\nimport kebabImg from \"../images/kebab.png\";\n\nexport function getData() {\n  return [\n    { title: \"Pizza\", price: 17.99, Image: pizzaImg,id:1 },\n    { title: \"Burger\", price: 15, Image: burgerImg,id:2 },\n    { title: \"Coca\", price: 3.5, Image: cocaImg ,id:3},\n    { title: \"Kebab\", price: 13.99, Image: kebabImg,id:4 },\n    { title: \"Salad\", price: 2.5, Image: saladImg,id:5 },\n    { title: \"Bottle of water\", price: 0.99, Image: waterImg,id:6 },\n    { title: \"Ice cream\", price: 2.99, Image: iceCreamImg,id:7 },\n  ];\n}\n","import React from \"react\";\nimport \"./Button.css\";\n\nfunction Button({ type, title, disable, onClick }) {\n  return (\n    <div\n      className={`btn ${\n        (type === \"add\" && \"add\") ||\n        (type === \"remove\" && \"remove\")\n      }`}\n      disabled={disable}\n      onClick={onClick}\n    >\n      {title}\n    </div>\n  );\n}\n\nexport default Button;","import React, { useState } from \"react\";\nimport \"./Card.css\";\nimport Button from \"../Button/Button\";\nfunction Card({ food, onAdd, onRemove }) {\n  const [count, setCount] = useState(0);\n  const { title, Image, price, id } = food;\n\n  const handleIncrement = () => {\n    setCount(count + 1);\n    onAdd(food);\n  };\n  const handleDecrement = () => {\n    setCount(count - 1);\n    onRemove(food);\n  };\n\n  return (\n    <div className=\"card\">\n      <span\n        className={`${count !== 0 ? \"card__badge\" : \"card__badge--hidden\"}`}\n      >\n        {count}\n      </span>\n      <div className=\"image__container\">\n        <img src={Image} alt={title} />\n      </div>\n      <h4 className=\"card__title\">\n        {title} . <span className=\"card__price\">{price} ₴</span>\n      </h4>\n\n      <div className=\"btn-container\">\n        <Button title={count !== 0 ? \"+\" : 'ADD'} type={count !== 0 ? \"add\" : 'new'} onClick={handleIncrement} />\n        {count !== 0 ? (\n          <Button title={\"-\"} type={\"remove\"} onClick={handleDecrement} />\n        ) : (\n          \"\"\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Card from \"./Components/Card/Card\";\n// import { con } from './db/db_connection';\n// import { database } from \"./db/db_connection\";\n// import { ref, set } from 'firebase/database';\nconst axios = require('axios');\nconst { getData } = require(\"./db/db\");\nconst foods = getData();\nconst tele = window.Telegram.WebApp;\nconst token = \"5468424043:AAFV7yfRA7EpyZ9VOTA75LRfnYcWVV-oUZw\";\n\nfunction App() {\n  const [cartItems, setCartItems] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [initData, setInitData] = useState(tele.initDataUnsafe);\n\n  // const getPrices = () => {\n  //   const res = [];\n  //   cartItems.forEach(a => {\n  //     res.push({label: `${a.title} x${a.quantity}`, amount: a.price * a.quantity * 100})\n  //   });\n  //   return res;\n  // }\n\n  useEffect(() => {\n    tele.ready();\n    tele.onEvent('mainButtonClicked', () => {\n      // fetch('db.php', {method:'POST', body:{new_order:JSON.strinigify({\n      //   user_id: initData.user.id,\n      //   //name: initData.user.first_name,\n      //   goods:JSON.strinigify(cartItems.map(a => a.title)),\n      //   quant: JSON.strinigify(cartItems.map(a => a.quantity)),\n      //   amount: totalPrice\n      // })}})\n      // .then(res => {\n        axios.post(`https://api.telegram.org/bot${token}/sendInvoice`, JSON.strinigify({\n          chat_id: initData.user.id,\n          title: `Замовлення № 1`,\n          description: 'Сплатіть за ваше замовлення тут',\n          payload: {\n            unique_id: `0001${Date.now()}`\n          },\n          provider_token: \"632593626:TEST:sandbox_i40694328466\",\n          currency: \"UAH\",\n          prices: [{label: '1', amount:100*100}]\n        }), {headers:{'Content-Type':'application/json'}})\n        .then(res => {\n          console.log(res);\n          tele.close()\n        })\n        .catch(err => console.log(err));\n      // })\n      // .then(res => {\n      //   tele.MainButton.text = res;\n      // })\n      // .then(res => tele.MainButton.text = JSON.stringify(res))\n      // .catch(err => tele.MainButton.text = err)\n    })\n  });\n\n  useEffect(() => {\n    setTotalPrice(cartItems.reduce((a, c) => a + c.price * c.quantity, 0));\n  }, [cartItems])\n\n  const onAdd = (food) => {\n    const exist = cartItems.find((x) => x.id === food.id);\n    if (exist) {\n      setCartItems(\n        cartItems.map((x) =>\n          x.id === food.id ? { ...exist, quantity: exist.quantity + 1 } : x\n        )\n      );\n    } else {\n      setCartItems([...cartItems, { ...food, quantity: 1 }]);\n    }\n    tele.MainButton.text = \"Оплатити\";\n    tele.MainButton.button_color = \"#00B900\";\n    tele.MainButton.show();\n  };\n\n  const onRemove = (food) => {\n    const exist = cartItems.find((x) => x.id === food.id);\n    if (exist.quantity === 1) {\n      setCartItems(cartItems.filter((x) => x.id !== food.id));\n    } else {\n      setCartItems(\n        cartItems.map((x) =>\n          x.id === food.id ? { ...exist, quantity: exist.quantity - 1 } : x\n        )\n      );\n    }\n    if(cartItems.length === 0){\n      tele.MainButton.hide();\n    }\n  };\n\n  // const onbClick = () => {\n  //   // const sql = `INSERT INTO Orders (user_id, goods, quantities, amount, payed) VALUES (112113, ${JSON.stringify([1, 2, 3])}, ${JSON.stringify([1, 2, 3])}, 100, 0)`;\n  //   // conn.query(sql, (err, rows) => {\n  //   //   if(err) throw err;\n  //   //   console.log(1);\n  //   //   console.log(rows[0]);\n  //   // });\n  //   set(ref(database, 'orders/' + 234233), {\n  //     id: 242342,\n  //     good:'kjdl'\n  //   })\n  //   .then(() => {\n  //     console.log('ok')\n  //   })\n  //   .catch(error => {\n  //     console.log(error);\n  //   })\n  // }\n\n  return (\n    <>\n      <div className=\"cart__container\">\n        <span className=\"\">Total Price: {totalPrice.toFixed(2)}₴</span>\n      </div>\n      <div className=\"cards__container\">\n        {foods.map((food) => {\n          return (\n            <Card food={food} key={food.id} onAdd={onAdd} onRemove={onRemove} />\n          );\n        })}\n      </div>\n      {/* <button onClick={onbClick}>ijerbfibwkh khb fkjwbfkwbefkbw</button> */}\n    </>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom/client\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(\n    <App />\n);\n"],"sourceRoot":""}